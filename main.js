!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var r=function(){function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardSelector=r,this._handleDeleteClick=o,this._handleLikeIcon=i,this._handleImageClick=n}var r,n;return r=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0)}},{key:"_setEventListeners",value:function(){var t=this;this._cardElement.querySelector("card__button-remove").addEventListener("click",(function(){t._handleDeleteClick()})),this._cardElement.querySelector("card__like-button").addEventListener("click",(function(){t._handleLikeIcon()})),this._cardElement.querySelector(".card__image").addEventListener("click",(function(){t._handleImageClick({name:t._name,link:t._link})}))}},{key:"_handleLike",value:function(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}},{key:"_handleDelete",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"getView",value:function(){var t={link:this._link,name:this._name};this._cardElement=this._getTemplate;var e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._cardElement.querySelector(".card__label-title").textContent=t.name,this._setEventListeners(),this._cardElement}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var a=function(){function t(e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=r.inputSelector,this._submitButtonSelector=r.submitButtonSelector,this._inactiveButtonClass=r.inactiveButtonClass,this._inputErrorClass=r.inputErrorClass,this._errorClass=r.errorClass,this._formEl=e,this._inputEls=function(t){if(Array.isArray(t))return o(t)}(n=this._formEl.querySelectorAll("modal__input"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._submitButtons=this._formEl.querySelector(this._submitButtonSelector)}var e,r;return e=t,(r=[{key:"_checkInputValidity",value:function(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formEl.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formEl.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}},{key:"_hasInvalidInput",value:function(t){return!t.every((function(t){return t.validity.valid}))}},{key:"toggleButtonState",value:function(){if(this._hasInvalidInput(this._inputEls))return this._submitButtons.classList.add(this._inactiveButtonClass),void(this._submitButtons.disabled=!0);this._submitButtons.classList.remove(this._inactiveButtonClass),this._submitButtons.disabled=!1}},{key:"_setEventListeners",value:function(){var t=this;this._inputEls.forEach((function(e){e.addEventListener("input",(function(r){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===u(o)?o:String(o)),n)}var o}var l=function(){function t(e,r){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&c(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function p(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}var y=function(){function t(e){var r,n,o,i=this,a=e.popupSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(t){"Escape"===t.key&&i.close()},(n=p(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popupElement=document.querySelector(a)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("click",(function(e){(e.target===t._popupElement||e.target.classList.contains("modal__close"))&&t.close()}))}}])&&f(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},h.apply(this,arguments)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(n);if(o){var r=b(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{popupSelector:t}))._popupImage=e._popupElement.querySelector(".modal__image"),e._popupTitle=e._popupElement.querySelector(".modal__preview-title"),e}return e=a,(r=[{key:"open",value:function(t,e){this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e,h(b(a.prototype),"open",this).call(this)}}])&&m(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},E.apply(this,arguments)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(n);if(o){var r=j(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,{popupSelector:t}))._handleFormSubmit=e,r._popupForm=r._popupElement.querySelector(".modal__form"),r._inputEls=function(t){if(Array.isArray(t))return g(t)}(n=r._popupForm.querySelectorAll(".modal__input"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r}return e=a,(r=[{key:"close",value:function(){this._popupForm.reset(),E(j(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var t={};return inputs.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())})),E(j(a.prototype),"setEventListeners",this).call(this)}},{key:"getForm",value:function(){return this._popupForm}}])&&w(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===P(o)?o:String(o)),n)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},L.apply(this,arguments)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(o){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{popupSelector:t}))._formEl=e._popupElement.querySelector(".modal__form"),e}return e=a,(r=[{key:"setEventListeners",value:function(){var t=this;this._formEl.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit()})),L(T(a.prototype),"setEventListeners",this).call(this)}},{key:"setSubmitAction",value:function(t){this._handleFormSubmit=t}}])&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}var A=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._titleEl=document.querySelector(e),this._descriptionEl=document.querySelector(r),this._avatarEl=document.querySelector(n)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{title:this._titleEl.textContent,description:this._descriptionEl.textContent}}},{key:"setUserInfo",value:function(t,e){this._titleEl.textContent=t,this._descriptionEl.textContent=e}},{key:"setAvatar",value:function(t){this._avatarEl.src=t}}])&&q(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===U(o)?o:String(o)),n)}var o}var x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl="https://around-api.en.tripleten-services.com/v1",this._headers={authorization:"f00dbe4d-3bcf-40e3-a46f-9e1ed8206bd5","Content-type":"application/json"}}var e,r;return e=t,(r=[{key:"_getResponse",value:function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getEditProfile",value:function(t,e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})}).then(this._checkResponse)}},{key:"getNewCard",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:e})})}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"changeAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatarUrl:t})}).then(this._checkResponse)}},{key:"updateLike",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:e?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}])&&D(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),N={profileEditButton:document.querySelector("#profile-edit-button"),profileEditModal:document.querySelector("#profile-edit-modal"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),profileImage:document.querySelector(".profile__image"),addNewModalCard:document.querySelector("#add-card-modal"),cardListEl:document.querySelector(".cards__list"),addNewCardButton:document.querySelector(".profile__plus-button"),deleteModal:document.querySelector("#delete-modal"),avatarInput:document.querySelector("#avatar-url-input"),avatarModal:document.querySelector("#avatar-modal"),avatarModalButton:document.querySelector("#avatar-modal-button")},V=new x({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f00dbe4d-3bcf-40e3-a46f-9e1ed8206bd5","Content-Type":"application/json"}}),M=new A(".profile__title",".profile__description",".profile__image");V.getInitialCards().then((function(t){(z=new l({items:t,renderer:function(t){H(t)}},"cards__list")).renderItems(),console.log(t)})).catch(console.error),V.getUserInfo().then((function(t){console.log(t),M.setUserInfo(t.name,t.about),M.setAvatar(t.avatar)})).catch(console.error);var F=new a(N.addNewModalCard,{inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"});F.enableValidation();var z,J=new l({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg ",alt:"Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg  ",alt:"Lago di Braies"}],renderer:function(t){var e=H(t);J.addItem(e)}},".cards__list");function H(t){var e=new r(t,"#card-template",Q,W,X);z.addItem(e.getView())}N.profileImage.addEventListener("click",(function(){avatarModal.open()})),N.addNewCardButton.addEventListener("click",(function(){G.open()})),N.profileEditButton.addEventListener("click",(function(){var t=M.getUserInfo();profileTitleInput.value=t.title,profileDescriptionInput.value=t.description,K.open()}));var Y=new _("#modal-preview");Y.setEventListeners();var $=new B("#delete-modal");$.setEventListeners();var G=new O("#add-card-modal",(function(t){setButtonText(N.addNewCardButton,"Saving..."),V.addNewCard(t).then((function(t){H(t),N.addNewModalCard.reset(),F.toggleButtonState(),G.close()})).catch(console.error).finally((function(){setButtonText(N.addNewCardButton,"Save")}))}));G.setEventListeners();var K=new O("#profile-edit-modal",(function(t){M.setUserInfo(t.title,t.description),K.close()}));function Q(t){Y.open(t)}function W(t){$.open(),$.setSubmitAction((function(){V.deleteCard(t._id).then((function(){$.close(),t.handleDelete()})).catch(console.error)}))}function X(t){V.updateLike(t._id,t.isLiked()).then((function(){t.handleLike(),console.log(t)})).catch(console.error)}K.setEventListeners(),J.renderItems(),editFormValidator.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNRixRQUFRRyxNQUNuQixDQS9CQWMsRUFBcUJFLG9CQXNFckJWLEVBQVlWLGNBR1orQixrQkFBa0J0QixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBjYXJkRGF0YSwgXHJcbiAgICAgIGNhcmRTZWxlY3RvciwgXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2ssIFxyXG4gICAgICBoYW5kbGVEZWxldGVDbGljaywgXHJcbiAgICAgIGhhbmRsZUxpa2VJY29uXHJcbiAgICAgICkgXHJcbiAgICAgIFxyXG4gICAgICB7XHJcbiAgICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbiA9IGhhbmRsZUxpa2VJY29uO1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIFxyXG4gICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiY2FyZF9fYnV0dG9uLXJlbW92ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfaGFuZGxlTGlrZSgpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2hhbmRsZURlbGV0ZSgpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0geyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH07XHJcbiAgXHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGU7XHJcbiAgXHJcbiAgICAgIGNvbnN0IGNhcmRJbWFnZUVMID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgICAgY2FyZEltYWdlRUwuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgY2FyZEltYWdlRUwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICBcclxuICAgICAgY29uc3QgY2FyZFRpdGxlRUwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xhYmVsLXRpdGxlXCIpO1xyXG4gICAgICBjYXJkVGl0bGVFTC50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcbiAgXHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgXHJcbiAgICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICAgIH1cclxuICB9IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvciggZm9ybVNlbGVjdG9yLCB2YWxpZGF0aW9uU2V0dGluZ3MgKSB7XHJcbiAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgICB0aGlzLl9mb3JtRWwgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKFwibW9kYWxfX2lucHV0XCIpXTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucyA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuICBcclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIH1cclxuICBcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgICByZXR1cm4gIWlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25zLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcblxyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pICB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICAvL29wZW4gcG9wdXBzXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vY2xvc2UgcG9wdXBzXHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgICAgICAvL2xpc3RlbnMgZm9yIGVzYyBidXR0b25cclxuICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICB9ICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIC8vc2V0cyBsaXN0ZW5lcnNcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYoXHJcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LXRpdGxlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oIGxpbmssIG5hbWUgKXtcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpXHJcbiAgICAgICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gXHJcbiAgICAgICAgICAgIChpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGb3JtKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwRm9ybTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fZm9ybUVsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl90aXRsZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9hdmF0YXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICAgICAgICB0aXRsZTogdGhpcy5fdGl0bGVFbC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdXNlckluZm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGVFbC50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyRWwuc3JjID0gYXZhdGFyO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCI7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBcImYwMGRiZTRkLTNiY2YtNDBlMy1hNDZmLTllMWVkODIwNmJkNVwiLFxyXG4gICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfZ2V0UmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgLy8gMSBMT0FESU5HIFVTRVIgSU5GT1JNQVRJT04gSU5UTyBUSEUgU0VSVkVSXHJcbiAgLy8gR0VUIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lIFxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIDIgTE9BRElORyBDQVJEUyBGUk9NIFRIRSBTRVJWRVJcclxuICAvLyBHRVQgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHMgXHJcbiAgLy8gaW5pdGlhbCByZXNwb25zZSB3aWxsIGJlIGFuIGVtcHR5IEpTT04gYXJyYXkgW11cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gMyAgRURJVElORyBUSEUgUFJPRklMRSBcclxuICAvLyAgUEFUQ0ggaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWUgXHJcbiAgLy8gQWRkIENvbnRlbnQtdHlwZSBhZnRlciB0aGUgYXV0aG9yaXphdGlvbiB0b2tlbiBcclxuICAvLyBib2R5OiBKU09OLnN0cmluZ2lmeSAoe05BTUUgYW5kIEFCT1VUfSkgXHJcbiAgZ2V0RWRpdFByb2ZpbGUobmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLCBcclxuICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuICAvLyA0IEFERElORyBBIE5FVyBDQVJEXHJcbiAgLy8gUE9TVCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkc1xyXG4gIC8vIGJvZHk6IEpTT04uc3RyaW5naWZ5ICh7TkFNRSBhbmQgTElOS30pXHJcbiAgZ2V0TmV3Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5ICh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuLy8gNSAmIDYgQ1JFQVRJTkcgQSBORVcgUE9QVVAgRk9SIERFTEVUSU5HIEEgQ0FSRFxyXG4gIC8vIHNlbmQgREVMRVRFIHJlcXVlc3QgXHJcbiAgICAvLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHMvY2FyZElkIFxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhclVybDogYXZhdGFyVXJsIH0pLFxyXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpa2UoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuICBcclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGF2YXRhcjogYXZhdGFyLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gIH1cclxuXHJcbiAgXHJcblxyXG5cclxuIiwiICBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICAgICAgYWx0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgICAgIGFsdDogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgICAgIGFsdDogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgICBhbHQ6IFwiTGF0ZW1hclwiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnIFwiLFxyXG4gICAgICBhbHQ6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyAgXCIsXHJcbiAgICAgIGFsdDogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgfSxcclxuICBdO1xyXG5cclxuICAgIGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICAgIC8vIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgdmFyaWFibGVzID0ge1xyXG4gICAgICBwcm9maWxlRWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpLFxyXG4gICAgICBwcm9maWxlRWRpdE1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKSxcclxuICAgICAgcHJvZmlsZVRpdGxlSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKSxcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKSxcclxuICAgICAgcHJvZmlsZUltYWdlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpLFxyXG4gICAgICBhZGROZXdNb2RhbENhcmQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIiksXHJcbiAgICAgIGNhcmRMaXN0RWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIiksXHJcbiAgICAgIGFkZE5ld0NhcmRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGx1cy1idXR0b25cIiksXHJcbiAgICAgIGRlbGV0ZU1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKSxcclxuICAgICAgYXZhdGFySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLXVybC1pbnB1dFwiKSxcclxuICAgICAgYXZhdGFyTW9kYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpLFxyXG4gICAgICBhdmF0YXJNb2RhbEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWwtYnV0dG9uXCIpLFxyXG4gICAgXHJcbiAgICB9XHJcblxyXG5cclxuZXhwb3J0IHtpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncywgdmFyaWFibGVzfTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsIFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncywgXHJcbiAgdmFyaWFibGVzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vL1ZhcmlhYmxlc1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZjAwZGJlNGQtM2JjZi00MGUzLWE0NmYtOWUxZWQ4MjA2YmQ1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7IFxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIFwiLnByb2ZpbGVfX2ltYWdlXCJcclxuKTtcclxuXHJcblxyXG5cclxuLy8gbGV0IHNlY3Rpb247XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgIGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiY2FyZHNfX2xpc3RcIlxyXG4gICAgKTtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxuICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFyaWFibGVzLmFkZE5ld01vZGFsQ2FyZCwgdmFsaWRhdGlvblNldHRpbmdzKTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gdmFyaWFibGVzLnByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuLy8gY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuLy8gICBwcm9maWxlRWRpdEZvcm0sXHJcbi8vICAgdmFsaWRhdGlvblNldHRpbmdzXHJcbi8vICk7XHJcblxyXG4vLyBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZExpc3RFbCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRMaXN0RWwpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbi8vIGNvbnN0IHByb2ZpbGVFZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbi8vICAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbi8vICAgaGFuZGxlUHJvZmlsZUVkaXRGb3JtU3VibWl0XHJcbi8vICk7XHJcblxyXG4vLyBjb25zdCBhdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4vLyAgIFwiI2F2YXRhci1tb2RhbFwiLFxyXG4vLyAgIGhhbmRsZUF2YXRhckZvcm1TdWJtaXRcclxuLy8gKTtcclxuLy8gYXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGZ1bmN0aW9uIG9wZW5BdmF0YXJGb3JtKCkge1xyXG4vLyAgIGF2YXRhck1vZGFsLm9wZW4oKTtcclxuLy8gfVxyXG5cclxuLy8gdmFyaWFibGVzLnByb2ZpbGVJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4vLyAgIG9wZW5BdmF0YXJGb3JtKCk7XHJcbi8vIH0pO1xyXG5cclxuLy8gY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtcHJldmlld1wiKTtcclxuLy8gcG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4vLyAgIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbi8vICAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcclxuLy8gKTtcclxuXHJcbi8vIGNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aERlbGV0ZShcIiNkZWxldGUtbW9kYWxcIik7XHJcbi8vIGRlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyAvL2Z1bmN0aW9uc1xyXG5cclxuLy8gZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4vLyAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuLy8gICAgIGNhcmREYXRhLFxyXG4vLyAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4vLyAgICAgaGFuZGxlSW1hZ2VDbGljayxcclxuLy8gICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4vLyAgICAgaGFuZGxlTGlrZUNsaWNrXHJcbi8vICAgKTtcclxuLy8gICBzZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZXRWaWV3KCkpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzZXRCdXR0b25UZXh0KGJ1dHRvbiwgdGV4dCkge1xyXG4vLyAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbi8vICAgc2V0QnV0dG9uVGV4dCh2YXJpYWJsZXMuYWRkTmV3Q2FyZEJ1dHRvbiwgXCJTYXZpbmcuLi5cIik7XHJcbi8vICAgYXBpXHJcbi8vICAgICAuYWRkTmV3Q2FyZChpbnB1dFZhbHVlcylcclxuLy8gICAgIC50aGVuKChyZXMpID0+IHtcclxuLy8gICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuLy8gICAgICAgLy8gY3JlYXRlIGEgbmV3IGNhcmRcclxuLy8gICAgICAgY3JlYXRlQ2FyZChyZXMpO1xyXG4vLyAgICAgICAvLyByZW5kZXIgaXRcclxuLy8gICAgICAgdmFyaWFibGVzLmFkZE5ld01vZGFsQ2FyZC5yZXNldCgpO1xyXG4vLyAgICAgICAvLyB0b2dnbGUgYnV0dG9uIHN0YXRlXHJcbi8vICAgICAgIGNhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbi8vICAgICAgIC8vIGNsb3NlIG1vZGFsXHJcbi8vICAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4vLyAgICAgfSlcclxuLy8gICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4vLyAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4vLyAgICAgICBzZXRCdXR0b25UZXh0KHZhcmlhYmxlcy5hZGROZXdDYXJkQnV0dG9uLCBcIlNhdmVcIik7XHJcbi8vICAgICB9KTtcclxuLy8gICB9XHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbi8vICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkRGF0YSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuLy8gICAvLyBvcGVuIHRoZSBtb2RhbFxyXG4vLyAgIGRlbGV0ZU1vZGFsLm9wZW4oKTtcclxuLy8gICAvLyBzZXQgdGhlIHN1Ym1pdCBhY3Rpb25cclxuLy8gICBkZWxldGVNb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4vLyAgICAgYXBpXHJcbi8vICAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxyXG4vLyAgICAgICAudGhlbigoKSA9PiB7XHJcbi8vICAgICAgICAgZGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuLy8gICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZSgpO1xyXG4vLyAgICAgICB9KVxyXG4vLyAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbi8vICAgfSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XHJcbi8vICAgYXBpXHJcbi8vICAgICAudXBkYXRlTGlrZShjYXJkLl9pZCwgY2FyZC5pc0xpa2VkKCkpXHJcbi8vICAgICAudGhlbigoKSA9PiB7XHJcbi8vICAgICAgIGNhcmQuaGFuZGxlTGlrZSgpO1xyXG4vLyAgICAgICBjb25zb2xlLmxvZyhjYXJkKTtcclxuLy8gICAgIH0pXHJcbi8vICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbi8vIH1cclxuXHJcblxyXG4vLyBmdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbi8vICAgc2V0QnV0dG9uVGV4dCh2YXJpYWJsZXMuYXZhdGFyTW9kYWxCdXR0b24sIFwiU2F2aW5nLi4uXCIpO1xyXG4vLyAgIGFwaVxyXG4vLyAgICAgLnVwZGF0ZUF2YXRhcihpbnB1dFZhbHVlcy5saW5rKVxyXG4vLyAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4vLyAgICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbi8vICAgICAgIGF2YXRhck1vZGFsLmNsb3NlKCk7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbi8vICAgICAuZmluYWxseSgoKSA9PiB7XHJcbi8vICAgICAgIHNldEJ1dHRvblRleHQodmFyaWFibGVzLmF2YXRhck1vZGFsQnV0dG9uLCBcIlNhdmVcIik7XHJcbi8vICAgICB9KTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRGb3JtU3VibWl0KGZvcm1EYXRhKSB7XHJcbi8vICAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEudGl0bGUsIGZvcm1EYXRhLmRlc2NyaXB0aW9uKTtcclxuLy8gICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4vLyB9XHJcblxyXG4vLyBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gLy9FdmVudCBMaXN0ZW5lcnNcclxuXHJcbi8vIHZhcmlhYmxlcy5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4vLyAgIGNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbi8vICAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8udGl0bGU7XHJcbi8vICAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8uZGVzY3JpcHRpb247XHJcbi8vICAgcHJvZmlsZUVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG4vLyB9KTtcclxuXHJcbi8vIGFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyBwcm9maWxlRWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gdmFyaWFibGVzLmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuLy8gICBjYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4vLyAgIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbi8vIH0pO1xyXG5cclxuLy8gQ3JlYXRlIGEgbmV3IGNhcmRcclxubGV0IHNlY3Rpb247XHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcclxufVxyXG5cclxuLy8gT3BlbiB0aGUgYXZhdGFyIGZvcm1cclxuZnVuY3Rpb24gb3BlbkF2YXRhckZvcm0oKSB7XHJcbiAgYXZhdGFyTW9kYWwub3BlbigpO1xyXG59XHJcblxyXG4vLyBPcGVuIHRoZSBhZGQgY2FyZCBmb3JtXHJcbmZ1bmN0aW9uIG9wZW5BZGRDYXJkRm9ybSgpIHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG4vLyBPcGVuIHRoZSBwcm9maWxlIGVkaXQgZm9ybVxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUVkaXRGb3JtKCkge1xyXG4gIGNvbnN0IHByb2ZpbGVVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8udGl0bGU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8uZGVzY3JpcHRpb247XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAub3BlbigpO1xyXG59XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lcnNcclxudmFyaWFibGVzLnByb2ZpbGVJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkF2YXRhckZvcm0pO1xyXG52YXJpYWJsZXMuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkFkZENhcmRGb3JtKTtcclxudmFyaWFibGVzLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUVkaXRGb3JtKTtcclxuXHJcbi8vIFBvcHVwIHdpdGggaW1hZ2VcclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtcHJldmlld1wiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIFBvcHVwIHdpdGggZGVsZXRlXHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aERlbGV0ZShcIiNkZWxldGUtbW9kYWxcIik7XHJcbmRlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBQb3B1cCB3aXRoIGZvcm1cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVFZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xyXG4gIC8vIG9wZW4gdGhlIG1vZGFsXHJcbiAgZGVsZXRlTW9kYWwub3BlbigpO1xyXG4gIC8vIHNldCB0aGUgc3VibWl0IGFjdGlvblxyXG4gIGRlbGV0ZU1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBkZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBhcGlcclxuICAgIC51cGRhdGVMaWtlKGNhcmQuX2lkLCBjYXJkLmlzTGlrZWQoKSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5oYW5kbGVMaWtlKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNhcmQpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIHNldEJ1dHRvblRleHQodmFyaWFibGVzLmF2YXRhck1vZGFsQnV0dG9uLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVBdmF0YXIoaW5wdXRWYWx1ZXMubGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICBhdmF0YXJNb2RhbC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBzZXRCdXR0b25UZXh0KHZhcmlhYmxlcy5hdmF0YXJNb2RhbEJ1dHRvbiwgXCJTYXZlXCIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0Rm9ybVN1Ym1pdChmb3JtRGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhLnRpdGxlLCBmb3JtRGF0YS5kZXNjcmlwdGlvbik7XHJcbiAgcHJvZmlsZUVkaXRGb3JtUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBzZXRCdXR0b25UZXh0KHZhcmlhYmxlcy5hZGROZXdDYXJkQnV0dG9uLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIHZhcmlhYmxlcy5hZGROZXdNb2RhbENhcmQucmVzZXQoKTtcclxuICAgICAgY2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldEJ1dHRvblRleHQodmFyaWFibGVzLmFkZE5ld0NhcmRCdXR0b24sIFwiU2F2ZVwiKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBSZW5kZXIgdGhlIGNhcmQgc2VjdGlvblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gRW5hYmxlIHZhbGlkYXRpb24gZm9yIHRoZSBlZGl0IGZvcm1cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJuYW1lcyI6WyJDYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlSWNvbiIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl90aGlzIiwiX2NhcmRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsImNhcmRJbWFnZUVMIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybVNlbGVjdG9yIiwidmFsaWRhdGlvblNldHRpbmdzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbCIsIl9pbnB1dEVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9ucyIsImlucHV0RWwiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXQiLCJlcnJvck1lc3NhZ2VFbCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJldmVyeSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImZvckVhY2giLCJlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3RoaXMyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwicmVzZXQiLCJpbnB1dFZhbHVlcyIsImlucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aERlbGV0ZSIsIlVzZXJJbmZvIiwidGl0bGVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl90aXRsZUVsIiwiX2Rlc2NyaXB0aW9uRWwiLCJfYXZhdGFyRWwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXZhdGFyIiwiQXBpIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJoZWFkZXJzIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImF2YXRhclVybCIsImlzTGlrZWQiLCJ2YXJpYWJsZXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUltYWdlIiwiYWRkTmV3TW9kYWxDYXJkIiwiY2FyZExpc3RFbCIsImFkZE5ld0NhcmRCdXR0b24iLCJkZWxldGVNb2RhbCIsImF2YXRhcklucHV0IiwiYXZhdGFyTW9kYWwiLCJhdmF0YXJNb2RhbEJ1dHRvbiIsImFwaSIsImJhc2VVcmwiLCJ1c2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInNlY3Rpb24iLCJjcmVhdGVDYXJkIiwicmVuZGVySXRlbXMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJjYXJkRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJjYXJkIiwiaGFuZGxlTGlrZUNsaWNrIiwiZ2V0VmlldyIsIm9wZW4iLCJhZGRDYXJkUG9wdXAiLCJwcm9maWxlVXNlckluZm8iLCJwcm9maWxlRWRpdEZvcm1Qb3B1cCIsInBvcHVwV2l0aEltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRCdXR0b25UZXh0IiwiYWRkTmV3Q2FyZCIsImZpbmFsbHkiLCJmb3JtRGF0YSIsInNldFN1Ym1pdEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJfaWQiLCJoYW5kbGVEZWxldGUiLCJ1cGRhdGVMaWtlIiwiaGFuZGxlTGlrZSIsImVkaXRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==