!function(){"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}(function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);var n=function(){function t(e,r,n){var o=e.name,i=e.link;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=o,this._link=i,this._cardSelector=r,this._handleImageClick=n}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._cardElement.querySelector(".card__like-button").addEventListener("click",(function(){t._handleLikeIcon()})),this._cardElement.querySelector(".card__button-remove").addEventListener("click",(function(){t._handleDeleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(function(){t._handleImageClick({name:t._name,link:t._link})}))}},{key:"_handleLikeIcon",value:function(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}},{key:"_handleDeleteCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"getView",value:function(){var t={link:this._link,name:this._name};this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);var e=this._cardElement.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._cardElement.querySelector(".card__label-title").textContent=t.name,this._setEventListeners(),this._cardElement}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}var u=function(){function t(e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=document.querySelector(r),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls=function(t){if(Array.isArray(t))return i(t)}(n=this._formEl.querySelectorAll(this._inputSelector))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t){var e=this._formEl.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formEl.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return!this._inputEls.every((function(t){return t.validity.valid}))}},{key:"toggleButtonState",value:function(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}},{key:"_setEventListeners",value:function(){var t=this;this._inputEls.forEach((function(e){e.addEventListener("input",(function(r){t._checkInputValidity(e),t.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formEl.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),l=u;function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var f=function(){function t(e,r){var n=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&s(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}var m=function(){function t(e){var r,n,o,i=this,a=e.popupSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(t){"Escape"===t.key&&i.close()},(n=y(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popupElement=document.querySelector(a)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("click",(function(e){(e.target===t._popupElement||e.target.classList.contains("modal__close"))&&t.close()}))}}])&&d(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},b.apply(this,arguments)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(n);if(o){var r=S(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,{popupSelector:t}))._popupImage=e._popupElement.querySelector(".modal__image"),e._popupTitle=e._popupElement.querySelector(".modal__preview-title"),e}return e=a,(r=[{key:"open",value:function(t,e){this._popupImage.src=t,this._popupImage.alt=e,this._popupTitle.textContent=e,b(S(a.prototype),"open",this).call(this)}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(m);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},j.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(n);if(o){var r=P(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,{popupSelector:t}))._handleFormSubmit=e,r._popupForm=r._popupElement.querySelector(".modal__form"),r._inputEls=function(t){if(Array.isArray(t))return E(t)}(n=r._popupForm.querySelectorAll(".modal__input"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r}return e=a,(r=[{key:"close",value:function(){this._popupForm.reset(),j(P(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var t={};return inputs.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())})),j(P(a.prototype),"setEventListeners",this).call(this)}},{key:"getForm",value:function(){return this._popupForm}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(m);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===I(o)?o:String(o)),n)}var o}var q=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._titleEl=document.querySelector(e),this._descriptionEl=document.querySelector(r),this._avatarEl=document.querySelector(n)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{title:this._titleEl.textContent,description:this._descriptionEl.textContent}}},{key:"setUserInfo",value:function(t,e){this._titleEl.textContent=t,this._descriptionEl.textContent=e}},{key:"setAvatar",value:function(t){this._avatarEl.src=t}}])&&L(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}var R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl="https://around-api.en.tripleten-services.com/v1",this._headers={authorization:"f00dbe4d-3bcf-40e3-a46f-9e1ed8206bd5","Content-type":"application/json"}}var e,r;return e=t,(r=[{key:"_getResponse",value:function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getEditProfile",value:function(t,e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})}).then(this._checkResponse)}},{key:"getNewCard",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:e})})}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"changeAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatarUrl:t})}).then(this._checkResponse)}},{key:"updateLike",value:function(t,e){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:e?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}])&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),A={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},U={profileEditButton:document.querySelector("#profile-edit-button"),profileEditModal:document.querySelector("#profile-edit-modal"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),profileImage:document.querySelector(".profile__image"),addNewModalCard:document.querySelector("#add-card-form"),cardListEl:document.querySelector(".cards__list"),addNewCardButton:document.querySelector(".profile__plus-button"),deleteModal:document.querySelector("#delete-modal"),avatarInput:document.querySelector("#avatar-url-input"),avatarModal:document.querySelector("#avatar-modal"),avatarModalButton:document.querySelector("#avatar-modal-button")},M=new R({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f00dbe4d-3bcf-40e3-a46f-9e1ed8206bd5","Content-Type":"application/json"}}),N=new l(U.addNewModalCard,A);N.enableValidation(),new l(U.avatarModal,A).enableValidation();var V=new l(U.profileEditModal.querySelector(".modal__form"),A),x=new q(".profile__title",".profile__description"),D=new f({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg",alt:"Yosemite Valley"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg",alt:"Lake Louise"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg",alt:"Bald Mountains"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg",alt:"Latemar"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg ",alt:"Vanoise National Park"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg  ",alt:"Lago di Braies"}],renderer:function(t){var e=$(t);D.addItem(e)}},".cards__list"),z=new C(U.profileEditModal,(function(t){x.setUserInfo(t.title,t.description),z.close()})),F=new g("#modal-preview");F.setEventListeners();var J=new C(U.addNewModalCard,(function(e){Y(U.addNewCardButton,"Saving..."),M.addNewCard(e).then((function(t){console.log(t),$(t),U.addNewModalCard.reset(),N.toggleButtonState(),J.close()})).catch(console.error).finally((function(){Y(U.addNewCardButton,"Save")})),new t.default(U.deleteModal).setEventListeners()})),H=new C(U.avatarModal,(function(t){Y(U.avatarModalButton,"Saving..."),M.updateAvatar(t.link).then((function(t){x.setAvatar(t.avatar),console.log(t),H.close()})).catch(console.error).finally((function(){Y(U.avatarModalButton,"Save")}))}));function Y(t,e){t.textContent=e}function $(t){return new n(t,"#card-template",(function(){F.open(t.link,t.name)})).getView()}H.setEventListeners(),U.profileEditButton.addEventListener("click",(function(){H.open()})),D.renderItems(),V.enableValidation(),M.getUserInfo().then((function(t){x.getUserInfo(t.name,t.about)})),M.getInitialCards().then((function(t){t.forEach((function(t){var e=generateCard(t);D.addItem(e)}))})),M.getInitialCards().then((function(t){new f({items:t,renderer:function(t){$(t)}},"gallery__cards").renderItems(),console.log(t)})).catch(console.error),M.getUserInfo().then((function(t){console.log(t),x.setUserInfo(t.name,t.about),x.setAvatar(t.avatar)})).catch(console.error),profileEditButton.addEventListener("click",(function(){var t=x.getUserInfo();profileTitleInput.value=t.title,profileDescriptionInput.value=t.description,z.open()})),J.setEventListeners(),z.setEventListeners(),document.querySelector(".profile__plus-button").addEventListener("click",(function(){N.toggleButtonState(),J.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIH1cclxuICBcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgICB9KTtcclxuICBcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tcmVtb3ZlXCIpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZXZlbnQgbGlzdGVuZXIgZm9yIGltYWdlIGNsaWNrXHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2hhbmRsZUxpa2VJY29uKCkge1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0geyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH07XHJcbiAgXHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICBcclxuICAgICAgY29uc3QgY2FyZEltYWdlRUwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgICBjYXJkSW1hZ2VFTC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICBjYXJkSW1hZ2VFTC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gIFxyXG4gICAgICBjb25zdCBjYXJkVGl0bGVFTCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGFiZWwtdGl0bGVcIik7XHJcbiAgICAgIGNhcmRUaXRsZUVMLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcclxuICBcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBcclxuICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gICAgfVxyXG4gIH0iLCIvLyBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuLy8gICAgIGNvbnN0cnVjdG9yKCBmb3JtU2VsZWN0b3IsIHZhbGlkYXRpb25TZXR0aW5ncyApIHtcclxuLy8gICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4vLyAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuLy8gICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4vLyAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4vLyAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbi8vICAgICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1TZWxlY3RvcjtcclxuLy8gICAgICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4vLyAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25zID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4vLyAgICAgfVxyXG4gIFxyXG4vLyAgICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbi8vICAgICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4vLyAgICAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4vLyAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuLy8gICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4vLyAgICAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4vLyAgICAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4vLyAgICAgfVxyXG4gIFxyXG4vLyAgICAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbi8vICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4vLyAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbi8vICAgICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuLy8gICAgICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbi8vICAgICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4vLyAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xyXG4vLyAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuLy8gICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25zLmRpc2FibGVkID0gdHJ1ZTtcclxuLy8gICAgICAgICByZXR1cm47XHJcbi8vICAgICAgIH1cclxuLy8gICAgICAgdGhpcy5fc3VibWl0QnV0dG9ucy5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4vLyAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25zLmRpc2FibGVkID0gZmFsc2U7XHJcbi8vICAgICB9XHJcblxyXG4gICAgXHJcbi8vICAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbi8vICAgICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuLy8gICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4vLyAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4vLyAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vLyAgICAgICB9KTtcclxuLy8gICAgIH1cclxuICBcclxuLy8gICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbi8vICAgICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbi8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgICAgICB9KTtcclxuLy8gICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8gICAgIH1cclxuLy8gICB9XHJcbi8vICAgZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuXHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybVNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pICB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfSBcclxuICAgIFxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICAvL29wZW4gcG9wdXBzXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vY2xvc2UgcG9wdXBzXHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgICAgICAvL2xpc3RlbnMgZm9yIGVzYyBidXR0b25cclxuICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICB9ICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIC8vc2V0cyBsaXN0ZW5lcnNcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYoXHJcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LXRpdGxlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oIGxpbmssIG5hbWUgKXtcclxuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yIChwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpXHJcbiAgICAgICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gXHJcbiAgICAgICAgICAgIChpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRGb3JtKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvcHVwRm9ybTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlRWwudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHRpdGxlLCBkZXNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlRWwudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX2F2YXRhckVsLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCJmMDBkYmU0ZC0zYmNmLTQwZTMtYTQ2Zi05ZTFlZDgyMDZiZDVcIixcclxuICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgX2dldFJlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIC8vIDEgTE9BRElORyBVU0VSIElORk9STUFUSU9OIElOVE8gVEhFIFNFUlZFUlxyXG4gIC8vIEdFVCBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZSBcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyAyIExPQURJTkcgQ0FSRFMgRlJPTSBUSEUgU0VSVkVSXHJcbiAgLy8gR0VUIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzIFxyXG4gIC8vIGluaXRpYWwgcmVzcG9uc2Ugd2lsbCBiZSBhbiBlbXB0eSBKU09OIGFycmF5IFtdXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIDMgIEVESVRJTkcgVEhFIFBST0ZJTEUgXHJcbiAgLy8gIFBBVENIIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lIFxyXG4gIC8vIEFkZCBDb250ZW50LXR5cGUgYWZ0ZXIgdGhlIGF1dGhvcml6YXRpb24gdG9rZW4gXHJcbiAgLy8gYm9keTogSlNPTi5zdHJpbmdpZnkgKHtOQU1FIGFuZCBBQk9VVH0pIFxyXG4gIGdldEVkaXRQcm9maWxlKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSwgXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbiAgLy8gNCBBRERJTkcgQSBORVcgQ0FSRFxyXG4gIC8vIFBPU1QgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcclxuICAvLyBib2R5OiBKU09OLnN0cmluZ2lmeSAoe05BTUUgYW5kIExJTkt9KVxyXG4gIGdldE5ld0NhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSAoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGlua1xyXG4gICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbi8vIDUgJiA2IENSRUFUSU5HIEEgTkVXIFBPUFVQIEZPUiBERUxFVElORyBBIENBUkRcclxuICAvLyBzZW5kIERFTEVURSByZXF1ZXN0IFxyXG4gICAgLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzL2NhcmRJZCBcclxuICAgIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlQXZhdGFyKGF2YXRhclVybCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXJVcmw6IGF2YXRhclVybCB9KSxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMaWtlKGNhcmRJZCwgaXNMaWtlZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB1cGRhdGVBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhdmF0YXI6IGF2YXRhcixcclxuICAgICAgICB9KSxcclxuICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICB9XHJcblxyXG4gIFxyXG5cclxuXHJcbiIsIiAgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgICAgIGFsdDogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgICBhbHQ6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gICAgICBhbHQ6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICAgICAgYWx0OiBcIkxhdGVtYXJcIixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZyBcIixcclxuICAgICAgYWx0OiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgIFwiLFxyXG4gICAgICBhbHQ6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIH0sXHJcbiAgXTtcclxuXHJcbiAgICBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgICAvLyBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIlxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHZhcmlhYmxlcyA9IHtcclxuICAgICAgcHJvZmlsZUVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKSxcclxuICAgICAgcHJvZmlsZUVkaXRNb2RhbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiksXHJcbiAgICAgIHByb2ZpbGVUaXRsZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIiksXHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIiksXHJcbiAgICAgIHByb2ZpbGVJbWFnZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKSxcclxuICAgICAgYWRkTmV3TW9kYWxDYXJkOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIiksXHJcbiAgICAgIGNhcmRMaXN0RWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIiksXHJcbiAgICAgIGFkZE5ld0NhcmRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGx1cy1idXR0b25cIiksXHJcbiAgICAgIGRlbGV0ZU1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKSxcclxuICAgICAgYXZhdGFySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLXVybC1pbnB1dFwiKSxcclxuICAgICAgYXZhdGFyTW9kYWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpLFxyXG4gICAgICBhdmF0YXJNb2RhbEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWwtYnV0dG9uXCIpLFxyXG4gICAgXHJcbiAgICB9XHJcblxyXG5cclxuZXhwb3J0IHtpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncywgdmFyaWFibGVzfTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsIFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncywgXHJcbiAgdmFyaWFibGVzfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vL1ZhcmlhYmxlc1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZjAwZGJlNGQtM2JjZi00MGUzLWE0NmYtOWUxZWQ4MjA2YmQ1XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7IFxyXG5cclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YXJpYWJsZXMuYWRkTmV3TW9kYWxDYXJkLCB2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFyaWFibGVzLmF2YXRhck1vZGFsLCB2YWxpZGF0aW9uU2V0dGluZ3MpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHZhcmlhYmxlcy5wcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgcHJvZmlsZUVkaXRGb3JtLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5nc1xyXG4pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRMaXN0RWwgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkTGlzdEVsKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHZhcmlhYmxlcy5wcm9maWxlRWRpdE1vZGFsLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0Rm9ybVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtcHJldmlld1wiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHZhcmlhYmxlcy5hZGROZXdNb2RhbENhcmQsXHJcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IGF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0odmFyaWFibGVzLmF2YXRhck1vZGFsLCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KTtcclxuYXZhdGFyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vZnVuY3Rpb25zXHJcblxyXG4vLyBmdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbi8vICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4vLyAgICAgY2FyZERhdGEsXHJcbi8vICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbi8vICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4vLyAgICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbi8vICAgICBoYW5kbGVMaWtlQ2xpY2tcclxuLy8gICApO1xyXG4vLyAgIHNlY3Rpb24uYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcclxuLy8gfVxyXG5mdW5jdGlvbiBvcGVuQXZhdGFyRm9ybSgpIHtcclxuICBhdmF0YXJNb2RhbC5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEJ1dHRvblRleHQoYnV0dG9uLCB0ZXh0KSB7XHJcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBzZXRCdXR0b25UZXh0KHZhcmlhYmxlcy5hZGROZXdDYXJkQnV0dG9uLCBcIlNhdmluZy4uLlwiKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAvLyBjcmVhdGUgYSBuZXcgY2FyZFxyXG4gICAgICBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIC8vIHJlbmRlciBpdFxyXG4gICAgICB2YXJpYWJsZXMuYWRkTmV3TW9kYWxDYXJkLnJlc2V0KCk7XHJcbiAgICAgIC8vIHRvZ2dsZSBidXR0b24gc3RhdGVcclxuICAgICAgY2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgLy8gY2xvc2UgbW9kYWxcclxuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldEJ1dHRvblRleHQodmFyaWFibGVzLmFkZE5ld0NhcmRCdXR0b24sIFwiU2F2ZVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGRlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aERlbGV0ZSh2YXJpYWJsZXMuZGVsZXRlTW9kYWwpO1xyXG4gICAgZGVsZXRlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcclxuICAvLyBvcGVuIHRoZSBtb2RhbFxyXG4gIGRlbGV0ZU1vZGFsLm9wZW4oKTtcclxuICAvLyBzZXQgdGhlIHN1Ym1pdCBhY3Rpb25cclxuICBkZWxldGVNb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICBjYXJkLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICB9KTtcclxufVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgc2V0QnV0dG9uVGV4dCh2YXJpYWJsZXMuYXZhdGFyTW9kYWxCdXR0b24sIFwiU2F2aW5nLi4uXCIpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZUF2YXRhcihpbnB1dFZhbHVlcy5saW5rKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIGF2YXRhck1vZGFsLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHNldEJ1dHRvblRleHQodmFyaWFibGVzLmF2YXRhck1vZGFsQnV0dG9uLCBcIlNhdmVcIik7XHJcbiAgICB9KTtcclxufVxyXG4vLyBmdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xyXG4vLyAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKHsgbmFtZTogZm9ybURhdGEudGl0bGUsIGxpbms6IGZvcm1EYXRhLnVybCB9KTtcclxuLy8gICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4vLyAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4vLyB9XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgcmV0dXJuIG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsICgpID0+IHtcclxuICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZERhdGEubGluaywgY2FyZERhdGEubmFtZSk7XHJcbiAgfSkuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdEZvcm1TdWJtaXQoZm9ybURhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YS50aXRsZSwgZm9ybURhdGEuZGVzY3JpcHRpb24pO1xyXG4gIHByb2ZpbGVFZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbnZhcmlhYmxlcy5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5BdmF0YXJGb3JtKCk7XHJcbn0pXHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigoVXNlckluZm8pID0+IHtcclxuICB1c2VySW5mby5nZXRVc2VySW5mbyhVc2VySW5mby5uYW1lLCBVc2VySW5mby5hYm91dCk7XHJcbn0pO1xyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZW5lcmF0ZUNhcmQoY2FyZCk7XHJcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5sZXQgc2VjdGlvbjtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiByZXMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCJnYWxsZXJ5X19jYXJkc1wiXHJcbiAgICApO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgY29uc29sZS5sb2cocmVzKTtcclxuICB9KVxyXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xyXG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuLy9FdmVudCBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVVc2VySW5mby50aXRsZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVVc2VySW5mby5kZXNjcmlwdGlvbjtcclxuICBwcm9maWxlRWRpdEZvcm1Qb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVFZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BsdXMtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTsiXSwibmFtZXMiOlsiZXhwb3J0cyIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIkNhcmQiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJrZXkiLCJfdGhpcyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJjYXJkRGF0YSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZUVMIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbCIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiY29uY2F0IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJldmVyeSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImZvckVhY2giLCJlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImRhdGEiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3NlIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfdGhpczIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGl0bGUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJyZXNldCIsImlucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInRpdGxlU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdGl0bGVFbCIsIl9kZXNjcmlwdGlvbkVsIiwiX2F2YXRhckVsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImF2YXRhciIsIkFwaSIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJhdmF0YXJVcmwiLCJpc0xpa2VkIiwidmFyaWFibGVzIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVJbWFnZSIsImFkZE5ld01vZGFsQ2FyZCIsImNhcmRMaXN0RWwiLCJhZGROZXdDYXJkQnV0dG9uIiwiZGVsZXRlTW9kYWwiLCJhdmF0YXJJbnB1dCIsImF2YXRhck1vZGFsIiwiYXZhdGFyTW9kYWxCdXR0b24iLCJhcGkiLCJiYXNlVXJsIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsImNhcmRTZWN0aW9uIiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJwcm9maWxlRWRpdEZvcm1Qb3B1cCIsImZvcm1EYXRhIiwic2V0VXNlckluZm8iLCJwb3B1cFdpdGhJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkQ2FyZFBvcHVwIiwic2V0QnV0dG9uVGV4dCIsImFkZE5ld0NhcmQiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciIsImZpbmFsbHkiLCJQb3B1cFdpdGhEZWxldGUiLCJ1cGRhdGVBdmF0YXIiLCJzZXRBdmF0YXIiLCJidXR0b24iLCJ0ZXh0Iiwib3BlbiIsImdldFZpZXciLCJyZW5kZXJJdGVtcyIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJjYXJkIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJwcm9maWxlVXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9